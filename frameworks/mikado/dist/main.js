(function(){'use strict';var p;const u={},w=Object.create(null),y=Object.create(null),z=document.documentElement||document.body.parentNode,B="ontouchstart"in window,E=!B&&window.PointerEvent&&navigator.maxTouchPoints;let F;
function G(a,b){var c=a.target;if(c!==window&&c!==z){b||(b=a.type);var e;if("undefined"===typeof e)for(;c&&c!==z;){var f=void 0;"click"===b&&F&&(f=c.getAttribute("tap"));f||(f=c.getAttribute(b));if(f){var k=f.indexOf(":"),d=c;if(-1<k){const h=f.substring(0,k);k=f.substring(k+1);for(f="";(d=d.parentElement)!==z;)if("root"===k?d._mkr:d.hasAttribute(k)){f=h;break}}if(f){e||(e=[]);e.push([f,d]);break}}c=c.parentElement}if(e)for(let h=0,g;h<e.length;h++)if(g=e[h],b=g[0],f=w[b]){c=g[1];if(d=y[b])d.J&&a.preventDefault(),
d.stop&&a.stopImmediatePropagation(),d.once&&(w[b]=null);f(c,a)}}}function H(a,b){w[a]=b;y[a]=null}let I,J,K;if(B||E){function a(e){var f=e;(e=e.touches)&&(f=e[0]);I=f.clientX;J=f.clientY}function b(e){const f=I,k=J;var d=e,h=e.changedTouches;h&&(d=h[0]);I=d.clientX;J=d.clientY;15>Math.abs(I-f)&&15>Math.abs(J-k)&&G(e,"tap")}const c={passive:!1,capture:!0};K=function(e){L(e,E?"pointerdown":"touchstart",a,c);L(e,E?"pointerup":"touchend",b,c)}}
function L(a,b,c,e){if("tap"===b){if(B||E){K(a);return}F=!0;b="click"}window[(a?"add":"remove")+"EventListener"](b,c,e||!1===e?e:!0)};function M(a,b,c){let e;c&&(e=a._mkc)&&(a._mkc=null);const f=b.length,k=[],d={};for(let l=0,r,m,n,v,x=null;l<f;l++){r=b[l];if(m=r.H){if(v=n=d[m],!v){a:{var h=a,g=m;for(let t=0,C=g.length,A="";t<C;t++){const q=g[t];A+=q;if(d[A])h=d[A];else{if(">"===q)h=h.firstChild;else{if("|"===q){n=[h.firstChild,h];break a}if("@"===q){n=[h.style,h];break a}h=h.nextSibling}d[A]=h}}n=[h]}v=n[0];n=n[1]||v}}else v=n=a;c&&(x=e?e[l]:{},n._mkc=x);k[l]=new N(x,v,"")}return a._mkp=k}
function O(a,b,c,e,f,k){const d=f||(b.tag?b.K?document.createElementNS("http://www.w3.org/2000/svg",b.tag):document.createElement(b.tag):document.createTextNode(b.text));let h,g;if(g=b.g)"object"===typeof g?c.push(new N(h={_c:""},d,e)):f||(d.className=g);if(g=b.l)for(const l in g){let r=g[l];"object"===typeof r?(h||c.push(new N(h={},d,e)),h["_a"+l]=!1):f||d.setAttribute(l,r)}if(g=b.event)for(const l in g)f||d.setAttribute(l,g[l]),u[l]||(L(1,l,G),u[l]=1);if(g=b.style)"object"===typeof g?(c.push(new N(h||
(h={}),d.style,e+"@")),h._s=""):f||(d.style.cssText=g);if(g=b.text)"object"===typeof g?(a=d,g=g[0],b.tag?(e+="|",a=!f&&d.firstChild,a||(a=document.createTextNode(g),d.appendChild(a))):h={},(h||(h={}))._t=g,c.push(new N(h,a,e))):f||(b.tag?d.textContent=g:d.nodeValue=g);else if(g=b.i){if(f&&(f=f.firstChild,!f))return null;g.constructor!==Array&&(g=[g]);for(let l=0,r,m=g.length;l<m;l++)if(r=g[l],e=l?e+"+":e+">",b=O(a,r,c,e,f,1),f){if(l<m-1&&(f=f.nextSibling,!f))return null}else d.appendChild(b)}else if(g=
b.I)"object"===typeof g?(h||c.push(new N(h={},d,e)),h._h=""):f||(d.innerHTML=g);else if(g=b.u){h||c.push(new N(null,d,e));let l;if("string"===typeof g){if(l=P[g],!(l instanceof Q)){e=l[0];if(b=l[1])b.async=!1,f&&(b.root=f,b.F=!0);P[g]=l=new Q(e,b)}}else 1!==g&&(l=new Q({name:a.name+"|"+a.u.length,j:g,key:g.key,cache:g.cache,s:a.j.s},{v:a.v,cache:a.cache,C:!!a.C,state:a.state,B:d,F:!!f}));1!==g&&a.u.push(l)}h&&(d._mkc=h);k||(d._mkp=c);return d}function N(a,b,c){this.c=a;this.n=b;this.H=c};const P=Object.create(null);function Q(a,b={}){if(!(this instanceof Q))return new Q(a,b);if("string"===typeof a){var c=P[a];if(c instanceof Q)return c;a=c[0];b||(b=c[1])}this.h=[];this.length=0;this.root=b.root||b.B||null;this.v=!!b.v;this.state=b.state||{};this.G=b.G||!1;this.key=a.key||"";this.o={};c=a.s;a.A||c&&(a.A=c.slice());this.apply=c&&c.pop();this.j=a;this.name=a.name;this.u=[];this.cache=(this.v||!!this.key)&&(a.cache||!!b.cache);this.root?this.B(this.root,b.F):this.m=null}p=Q.prototype;
p.B=function(a,b){this.G&&(a=a.shadowRoot||a.attachShadow({mode:"open"}));const c=a._mki;var e=this.root!==a;if(c===this){if(!e)return this;this.h=a._mkd;this.length=this.h.length}else if(c)c.clear(),a._mkd=this.h=[],this.length=0,a.firstChild&&(a.textContent="");else{if(b){var f=a.children;const k=f.length,d=Array(k);for(let h=0;h<k;h++)d[h]=f[h];this.h=d;this.length=this.h.length}else this.h=[],this.length=0,a.firstChild&&(a.textContent="");a._mkd=this.h}if(this.key)if(e&&this.root&&(this.root._mkl=
this.o),c===this)this.o=a._mkl;else{e={};if(!c&&b&&this.length)for(let k=0,d,h;k<this.length;k++)d=this.h[k],h=d.getAttribute("key"),d._mkk=h,e[h]=d;a._mkl=this.o=e}a._mki=this;this.root=a;this.m||(b&&this.length&&(this.m=this.h[0].cloneNode(!0),O(this,this.j.j,[],"",this.m)&&R(this)),this.j&&(this.m=O(this,this.j.j,[],""),R(this)));return this};function R(a){a.j.A&&(a.j.s=a.j.A,a.j.A=null);a.j=null}
function S(a,b){var c=a.length;if(!b&&!a.apply)return a.h[0]||a.add(),a;if(Array.isArray(b)){var e=b.length;if(!e)return a.remove(0,c)}else b=[b],e=1;var f=a.key;!c||f||a.v||(a.remove(0,c),c=0);var k=c<e?c:e,d=0;if(d<k)for(let l,r;d<k;d++){l=a.h[d];r=b[d];if(f&&l._mkk!==r[f]){c=a.h;e=a.o;f=a.key;k=b.length;let m=c.length,n=m>k?m:k,v=0;for(d||(d=0);d<n;d++){var h=void 0;if(d<k){const x=b[d];var g=d>=m;let t,C,A;if(!g&&(t=c[d],C=x[f],A=t._mkk,A===C)){a.update(t,x,void 0,d);continue}if(g||!e[C]){g||
!a.C?(m++,n=m>k?m:k,a.add(x,void 0,d)):a.replace(t,x,void 0,d);continue}let q,D;for(g=d+1;g<n;g++)if(!q&&g<m&&c[g]._mkk===C&&(q=g+1),!D&&g<k&&b[g][f]===A&&(D=g+1),q&&D){q>=D+v?(h=c[q-1],a.root.insertBefore(h,t),a.update(h,x,void 0,d),q===D?(1<g-d&&a.root.insertBefore(t,c[q]),c[d]=c[g],c[g]=t):(T(c,q-1,d),v++)):(h=D-1+v,a.root.insertBefore(t,c[h]||null),T(c,d,(h>m?m:h)-1),v--,d--);h=1;break}}h||(a.remove(d),m--,n=m>k?m:k,d--)}return a}a.update(l,r,void 0,d)}if(d<e)for(;d<e;d++)a.add(b[d],void 0);else e<
c&&a.remove(e,c-e);return a}
p.replace=function(a,b,c,e){"undefined"===typeof e&&("number"===typeof a?(e=0>a?this.length+a:a,a=this.h[e]):e=this.index(a));let f;if(this.key){if((f=this.o[b[this.key]])&&f!==a){var k=this.index(f);const d=k<e?f:a,h=k<e?a:f;let g=this.h[k<e?k+1:e+1];this.h[e]=f;this.h[k]=a;g!==h?this.root.insertBefore(d,h):g=d;this.root.insertBefore(h,g)}k=f}else this.v&&(k=a);k?this.apply&&this.apply(b,c||this.state,e,k._mkp||M(k,this.m._mkp,this.cache)):(b=this.create(b,c,e,1),(this.key||this.C)&&U(this,a),this.h[e]=
b,a.replaceWith(b));return this};p.update=function(a,b,c,e){if(!this.apply)return this;"undefined"===typeof e&&("number"===typeof a?(e=0>a?this.length+a-1:a,a=this.h[e]):e=this.index(a));this.apply(b,c||this.state,e,a._mkp||M(a,this.m._mkp,this.cache));return this};
p.create=function(a,b,c,e){const f=this.key,k=f&&a[f];let d,h;d||(d=h=this.m,h||(this.m=d=h=O(this,this.j.j,[],""),R(this)));let g;if(this.apply){const l=d._mkp||M(d,this.m._mkp,!!h||this.cache);g=h&&this.cache&&Array(l.length);this.apply(a,b||this.state,c,l,!!h,g)}h&&(d=h.cloneNode(!0),g&&!0!==g&&(d._mkc=g),d._mkr=1);f&&(d._mkk=k,e&&(this.o[k]=d));return d};
p.add=function(a,b,c){let e;"number"===typeof b?(c=0>b?this.length+b:b,b=null,e=c<this.length):"number"===typeof c?(0>c&&(c+=this.length),e=c<this.length):c=this.length;a=this.create(a,b,c,1);e?(this.root.insertBefore(a,this.h[c]),T(this.h,this.length-1,c,a),this.length++):(this.root.appendChild(a),this.h[this.length++]=a);return this};function T(a,b,c,e){const f=e||a[b];e&&b++;if(b<c)for(;b<c;b++)a[b]=a[b+1];else for(;b>c;b--)a[b]=a[b-1];a[c]=f}
p.append=function(a,b,c){let e;"number"===typeof b?(c=0>b?this.length+b:b,b=null,e=1):"number"===typeof c&&(0>c&&(c+=this.length),e=1);const f=a.length;for(let k=0;k<f;k++)this.add(a[k],b,e?c++:null);return this};p.clear=function(){this.length&&this.remove(0,this.length);return this};
p.remove=function(a,b){let c=this.length;c&&a&&("number"!==typeof a?a=this.index(a):0>a&&(a=c+a));if(!c||a>=c)return this;b?0>b&&(a-=b+1,0>a&&(a=0),b*=-1):b=1;let e;!a&&b>=c?(e=this.h,b=e.length,this.root.textContent="",this.root._mkd=this.h=[],c=0):(e=this.h.splice(a,b),c-=b);const f=this.key||this.C;a=!1;for(let k=0,d;k<b;k++)d=e[k],c&&d.remove(),f&&U(this,d);if(a&&0<(a=this.D.size-a))for(b=this.D.keys();a--;)this.D.delete(b.next().value);this.length=c;return this};
p.index=function(a){return a?this.h.indexOf(a):-1};p.node=function(a){return this.h[a]};function U(a,b){a.key&&(b=b._mkk,a.o[b]=null)}function aa(a){for(let b=0,c;b<a.u.length;b++)c=a.u[b],P[c.name]||aa(c);a.key&&(a.root&&(a.root._mkl=null),a.o=null);a.root&&(a.root._mkd=a.root._mki=null);a.h=a.root=a.j=a.apply=a.u=a.state=a.m=null};const ba="pretty large big small tall short long handsome plain quaint clean elegant easy angry crazy helpful mushy odd unsightly adorable important inexpensive cheap expensive fancy".split(" "),ca="red yellow blue green pink brown purple brown white black orange".split(" "),da="table chair house bbq desk car pony cookie sandwich burger pizza mouse keyboard".split(" "),ea=ba.length,fa=ca.length,ha=da.length;let ia=1;
function V(a){const b=Array(a);for(let c=0;c<a;c++)b[c]={id:ia++,label:ba[Math.random()*ea|0]+" "+ca[Math.random()*fa|0]+" "+da[Math.random()*ha|0]};return b};var ja=document.body,W={name:"app",j:{tag:"div",l:{id:"main"},i:{tag:"div",i:[{tag:"div",i:{tag:"div",i:[{tag:"div",i:{tag:"h1",text:'Mikado-"keyed"'},g:"col-md-6"},{tag:"div",i:{tag:"div",i:[{tag:"div",i:{tag:"button",l:{type:"button",id:"run"},g:"btn btn-primary btn-block",event:{click:"run"},text:"Create 1,000 rows"},g:"col-sm-6 smallpad"},{tag:"div",i:{tag:"button",l:{type:"button",id:"runlots"},g:"btn btn-primary btn-block",event:{click:"runlots"},text:"Create 10,000 rows"},g:"col-sm-6 smallpad"},
{tag:"div",i:{tag:"button",l:{type:"button",id:"add"},g:"btn btn-primary btn-block",event:{click:"add"},text:"Append 1,000 rows"},g:"col-sm-6 smallpad"},{tag:"div",i:{tag:"button",l:{type:"button",id:"update"},g:"btn btn-primary btn-block",event:{click:"update"},text:"Update every 10th row"},g:"col-sm-6 smallpad"},{tag:"div",i:{tag:"button",l:{type:"button",id:"clear"},g:"btn btn-primary btn-block",event:{click:"clear"},text:"Clear"},g:"col-sm-6 smallpad"},{tag:"div",i:{tag:"button",l:{type:"button",
id:"swaprows"},g:"btn btn-primary btn-block",event:{click:"swaprows"},text:"Swap Rows"},g:"col-sm-6 smallpad"}],g:"row"},g:"col-md-6"}],g:"row"},g:"jumbotron"},{tag:"table",i:{tag:"tbody",l:{id:"tbody"}},g:"table table-hover table-striped test-data"},{tag:"span",l:{"aria-hidden":"true"},g:"preloadicon glyphicon glyphicon-remove"}],g:"container"}},s:null};let X;if(W.s)X=new Q(W),ja.append(X.create(void 0,void 0)),aa(X);else{const a=O({},W.j,[],"",null,1);ja.append(a)}
const Y=new Q({name:"item",key:"id",cache:!0,j:{tag:"tr",i:[{tag:"td",g:"col-md-1",text:[]},{tag:"td",i:{tag:"a",g:"lbl",event:{click:"select:root"},text:[]},g:"col-md-4"},{tag:"td",i:{tag:"a",i:{tag:"span",l:{"aria-hidden":"true"},g:"remove glyphicon glyphicon-remove"},g:"remove",event:{click:"remove:root"}},g:"col-md-1"},{tag:"td",g:"col-md-6"}],g:[]},s:[function(a,b,c,e,f,k){let d;f=e[0];k&&(k[0]=d={});b=b.selected===c?"danger":"";d&&(d._c=b);f.c._c!==b&&(f.c._c=b,f.n.className=b);f=e[1];k&&(k[1]=
d={});b=a.id;d&&(d._t=b);f.c._t!==b&&(f.c._t=b,f.n.nodeValue=b);f=e[2];k&&(k[2]=d={});b=a.label;d&&(d._t=b);f.c._t!==b&&(f.c._t=b,f.n.nodeValue=b)}]},{B:document.getElementById("tbody")});let Z;H("run",()=>S(Y.clear(),Z=V(1E3)));H("runlots",()=>S(Y.clear(),Z=V(1E4)));H("add",()=>Y.append(Z=V(1E3)));H("update",()=>{for(let a=0;a<Z.length;a+=10)Z[a].label+=" !!!",Y.update(a,Z[a])});H("clear",()=>Y.clear());H("swaprows",()=>{const a=Z[1];Z[1]=Z[998];Z[998]=a;S(Y,Z)});H("remove",a=>Y.remove(a));
H("select",a=>{const b=Y.state,c=b.selected;b.selected=Y.index(a);0<=c&&Y.update(c,Z[c]);Y.update(b.selected,Z[b.selected])});}).call(this);
